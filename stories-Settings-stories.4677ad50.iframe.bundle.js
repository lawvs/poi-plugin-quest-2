"use strict";(self.webpackChunkpoi_plugin_quest_info_2=self.webpackChunkpoi_plugin_quest_info_2||[]).push([[17],{"./src/stories/Settings.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Main:()=>Main,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Settings_stories});var react=__webpack_require__("./node_modules/react/index.js"),components=__webpack_require__("./node_modules/@blueprintjs/core/lib/esm/components/index.js"),intent=__webpack_require__("./node_modules/@blueprintjs/core/lib/esm/common/intent.js"),iconNames=__webpack_require__("./node_modules/@blueprintjs/icons/lib/esm/iconNames.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),kcanotifyGamedata=__webpack_require__("./build/kcanotifyGamedata/index.ts"),package_0=__webpack_require__("./package.json"),env=__webpack_require__("./src/poi/env.ts"),hooks=__webpack_require__("./src/poi/hooks.ts");const tips={log(message){env.kQ?window.log(message):console.log("[log]",message)},warn(message){env.kQ?window.warn(message):console.warn("[warn]",message)},error(message){env.kQ?window.error(message):console.error("[error]",message)},success(message){env.kQ?window.success(message):console.log("[success]",message)}};var store=__webpack_require__("./src/store/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Container=styled_components_browser_esm.ZP.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  user-select: text;

  & > * + * {
    margin-top: 8px;
  }
`,DataExportArea=()=>{const[text,setText]=(0,react.useState)(""),{t}=(0,hooks.a5)(),{exportQuestDataToClipboard,importAsPoiState}=(0,hooks.Im)(),handleChange=(0,react.useCallback)((e=>{setText(e.target.value)}),[]),handleImportData=(0,react.useCallback)((()=>{importAsPoiState(text),setText(""),tips.success(t("Import data success"))}),[importAsPoiState,t,text]),handleExportData=(0,react.useCallback)((async()=>{try{await exportQuestDataToClipboard(),tips.success(t("Copied data to clipboard"))}catch(error){console.error(error),tips.error(t("Failed to export quest data! Please sync quest data first"))}}),[exportQuestDataToClipboard,t]);return env.kQ?(0,jsx_runtime.jsx)(components.zx,{icon:iconNames.d.EXPORT,text:t("Export quest data"),onClick:handleExportData}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(components.Kx,{growVertically:!1,intent:intent.S.PRIMARY,onChange:handleChange,value:text}),(0,jsx_runtime.jsx)(components.zx,{icon:iconNames.d.IMPORT,text:t("Import quest data"),onClick:handleImportData})]})},SettingsMain=()=>{const{t}=(0,hooks.a5)(),isSimplifiedChinese="zh-CN"===(0,store.ZK)(),removeStorage=(0,store.Zv)(),[preferKcwiki,setPreferKcwiki]=(0,store.l9)(),handleEnabledChange=(0,react.useCallback)((()=>{setPreferKcwiki(!preferKcwiki)}),[preferKcwiki,setPreferKcwiki]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(components.XZ,{checked:preferKcwiki,disabled:!isSimplifiedChinese,label:t("Use Kcwiki data"),onChange:handleEnabledChange}),(0,jsx_runtime.jsx)(components.xv,{children:t("Version",{version:package_0.i8})}),(0,jsx_runtime.jsx)(components.xv,{children:t("Data Version",{version:kcanotifyGamedata.i})}),(0,jsx_runtime.jsx)(components.AN,{icon:iconNames.d.CODE,rightIcon:iconNames.d.SHARE,text:t("View source code on GitHub"),href:package_0.Xh,target:"_blank"}),(0,jsx_runtime.jsx)(components.zx,{icon:iconNames.d.TRASH,text:t("Restore defaults"),onClick:removeStorage}),(0,jsx_runtime.jsx)(DataExportArea,{})]})},Settings=()=>(0,jsx_runtime.jsx)(react.StrictMode,{children:(0,jsx_runtime.jsx)(store.g3,{children:(0,jsx_runtime.jsx)(Container,{children:(0,jsx_runtime.jsx)(SettingsMain,{})})})});Settings.displayName="Settings";const Settings_stories={title:"Settings",component:Settings,argTypes:{}},Template=()=>(0,jsx_runtime.jsx)(Settings,{});Template.displayName="Template";const Main=Template.bind({}),__namedExportsOrder=["Main"]}}]);
//# sourceMappingURL=stories-Settings-stories.4677ad50.iframe.bundle.js.map